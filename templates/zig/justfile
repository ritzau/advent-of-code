# Advent of Code Solution
# All commands use Nix for reproducible builds

# Get current system (e.g., x86_64-linux, aarch64-darwin)
system := `nix eval --impure --raw --expr 'builtins.currentSystem'`

# Build the solution
build:
    nix build

# Run the default app (part1)
run:
    nix run

# Run a specific part with input from stdin
run-part PART:
    nix run .#part{{PART}}

# Format code
format:
    nix run .#format

# Run all checks (build + tests)
check:
    nix flake check

# Run a specific check (build or test)
check-one CHECK:
    nix build .#checks.{{system}}.{{CHECK}}

# Clean build artifacts
clean:
    rm -rf zig-cache/ zig-out/ result
